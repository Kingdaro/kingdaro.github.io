!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);!function(t){t[t.top=0]="top",t[t.bottom=1]="bottom"}(e.Side||(e.Side={}));var r=function(){function t(t){this.NAME=t}return t.prototype.obstruct=function(t,e){},t}();e.Trait=r;var o=function(){function t(){this.pos=new i.Vec2(0,0),this.vel=new i.Vec2(0,0),this.size=new i.Vec2(0,0),this.traits=[]}return t.prototype.addTrait=function(t){this.traits.push(t)},t.prototype.getTrait=function(t){var e=this.traits.find(function(e){return e.NAME===t});if(!e)throw new Error("Trait not found:"+t);return e},t.prototype.update=function(t){var e=this;this.traits.forEach(function(n){n.update(e,t)})},t.prototype.obstruct=function(t){var e=this;this.traits.forEach(function(n){n.obstruct(e,t)})},t}();e.Entity=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.set=function(t,e){this.x=t,this.y=e},t}();e.Vec2=i;var r=function(){function t(){this.grid=[]}return t.prototype.set=function(t,e,n){this.grid[t]||(this.grid[t]=[]),this.grid[t][e]=n},t.prototype.get=function(t,e){var n=this.grid[t];if(n)return n[e]},t.prototype.forEach=function(t){this.grid.forEach(function(e,n){e.forEach(function(e,i){t(e,n,i)})})},t}();e.Matrix=r},function(t,e,n){"use strict";function i(t,e){return function(n){var i=Math.floor(n/e%t.length);return t[i]}}Object.defineProperty(e,"__esModule",{value:!0}),e.createAnimation=i},function(t,e,n){"use strict";function i(t){return new Promise(function(e,n){var i=new Image;i.addEventListener("load",function(){e(i)}),i.addEventListener("error",function(e){n("Could not load image from "+t)}),i.src=t})}function r(t){return fetch(t).then(function(t){return t.json()})}function o(t,e){function n(e,n,i,r,o){for(var a=n+i,s=r+o,u=n;u<a;u++)for(var c=r;c<s;c++)t.tiles.set(u,c,{name:e.sprite,type:e.type})}e.forEach(function(t){t.ranges.forEach(function(e){if(4===e.length){var i=e[0],r=e[1],o=e[2],a=e[3];n(t,i,r,o,a)}else if(3===e.length){var i=e[0],r=e[1],o=e[2];n(t,i,r,o,1)}else if(2===e.length){var i=e[0],o=e[1];n(t,i,1,o,1)}})})}function a(t){return u(this,void 0,void 0,function(){var e,n,o,a;return c(this,function(s){switch(s.label){case 0:return e="/public/sprites/"+t+".json",[4,r(e)];case 1:return n=s.sent(),[4,i(n.imageURL)];case 2:return o=s.sent(),a=new p.SpriteSheet(o,n.tileW,n.tileH),n.tiles&&n.tiles.forEach(function(t){var e=t.index,n=e[0],i=e[1];a.defineTile(t.name,n,i)}),n.frames&&n.frames.forEach(function(t){var e=t.rect,n=e[0],i=e[1],r=e[2],o=e[3];a.define(t.name,n,i,r,o)}),n.animations&&n.animations.forEach(function(t){var e=l.createAnimation(t.frames,t.frameLength);a.defineAnimation(t.name,e)}),[2,a]}})})}function s(t){return u(this,void 0,void 0,function(){var e,n,i,s,u;return c(this,function(c){switch(c.label){case 0:return[4,r("/public/levels/"+t+".json")];case 1:return e=c.sent(),[4,a(e.spriteSheet)];case 2:return n=c.sent(),i=new h.Level,o(i,e.backgrounds),s=f.createBackgroundLayer(i,n),i.comp.layers.push(s),u=f.createSpriteLayer(i.entities),i.comp.layers.push(u),[2,i]}})})}var u=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}u((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),f=n(10),h=n(11),p=n(15);e.loadImage=i,e.loadSpriteSheet=a,e.loadLevel=s},function(t,e,n){"use strict";function i(t){var e="\n    Controls:\n\n      Keyboard:\n        A - Move Left\n        D - Move Right\n        P - Jump\n        O - Run\n\n      Gamepad:\n        Left Stick - Move Left/Right\n        A/B - Jump\n        X/Y - Run\n  ",n=e.split(/[\r\n]/);t.save(),t.font="20px Roboto, sans-serif",t.textAlign="left",t.textBaseline="top",t.fillStyle="white",n.forEach(function(e,n){var i=24*n;t.fillText(e,0,0+i)}),t.restore()}var r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}u((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),s=n(6),u=n(16),c=n(3),l=n(18);(function(){return r(this,void 0,void 0,function(){var t,e,n,r,f,h,p,d,y;return o(this,function(o){switch(o.label){case 0:return t=document.getElementById("screen"),e=t.getContext("2d"),[4,Promise.all([s.createMario(),c.loadLevel("1-1")])];case 1:return n=o.sent(),r=n[0],f=n[1],h=new a.Camera,e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,r.pos.set(64,64),f.entities.add(r),p=u.setupKeyboard(r),p.listenTo(window),d=u.setupGamepad(r),y=new l.Timer,y.update=function(t){f.update(t),r.pos.x>100&&(h.pos.x=r.pos.x-100),d(),e.save(),e.scale(3,3),f.comp.draw(e,h),e.restore(),i(e)},y.start(),[2]}})})})().catch(console.error)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(){function t(){this.pos=new i.Vec2(0,0),this.size=new i.Vec2(256,224)}return t}();e.Camera=r},function(t,e,n){"use strict";function i(){return r(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:return t=a.Mario.bind,[4,s.loadSpriteSheet("mario")];case 1:return[2,new(t.apply(a.Mario,[void 0,e.sent()]))]}})})}var r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}u((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var a=n(7),s=n(3);e.createMario=i},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(0),a=n(8),s=n(9),u=.001,c=function(t){function e(e){var n=t.call(this)||this;return n.sprites=e,n.jump=new s.Jump,n.go=new a.Go,n.runAnimation=r.createAnimation(["run-1","run-2","run-3"],8),n.size.set(14,16),n.addTrait(n.jump),n.addTrait(n.go),n.go.dragFactor=u,n}return i(e,t),e.prototype.resolveAnimationFrame=function(){return this.jump.falling?"jump":this.go.distance>0?this.vel.x>0&&this.go.dir<0||this.vel.x<0&&this.go.dir>0?"brake":this.runAnimation(this.go.distance):"idle"},e.prototype.draw=function(t){this.sprites.draw(this.resolveAnimationFrame(),t,0,0,this.go.heading<0)},e.prototype.turbo=function(t){this.go.dragFactor=t?2e-4:u},e}(o.Entity);e.Mario=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(t){function e(){var e=t.call(this,"go")||this;return e.dir=0,e.acceleration=400,e.distance=0,e.heading=1,e.dragFactor=2e-4,e.deceleration=300,e}return i(e,t),e.prototype.update=function(t,e){var n=Math.abs(t.vel.x);if(0!==this.dir){t.vel.x+=this.acceleration*this.dir*e;var i=t.getTrait("jump");i?!1===i.falling&&(this.heading=this.dir):this.heading=this.dir}else if(0!==t.vel.x){var r=Math.min(n,this.deceleration*e);t.vel.x+=-Math.sign(t.vel.x)*r}else this.distance=0;var o=this.dragFactor*t.vel.x*n;t.vel.x-=o,this.distance+=n*e},e}(r.Trait);e.Go=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(t){function e(){var e=t.call(this,"jump")||this;return e.duration=.3,e.velocity=200,e.engageTime=0,e.ready=0,e.requestTime=0,e.gracePeriod=.1,e.speedBoost=.3,e}return i(e,t),e.prototype.start=function(){this.requestTime=this.gracePeriod},e.prototype.cancel=function(){this.engageTime=0,this.requestTime=0},e.prototype.update=function(t,e){this.requestTime>0&&(this.ready>0&&(this.engageTime=this.duration,this.requestTime=0),this.requestTime-=e),this.engageTime>0&&(t.vel.y=-(this.velocity+Math.abs(t.vel.x)*this.speedBoost),this.engageTime-=e),this.ready-=1},e.prototype.obstruct=function(t,e){e===r.Side.bottom?this.ready=1:e===r.Side.top&&this.cancel()},Object.defineProperty(e.prototype,"falling",{get:function(){return this.ready<0},enumerable:!0,configurable:!0}),e}(r.Trait);e.Jump=o},function(t,e,n){"use strict";function i(t,e){function n(n,r){a=n,s=r;for(var o=a;o<=s;o++)!function(n){var r=i.grid[n];r&&r.forEach(function(i,r){e.animations.has(i.name)?e.drawAnimation(i.name,u,n-a,r,t.totalTime):e.drawTile(i.name,u,n-a,r)})}(o)}var i=t.tiles,r=t.tileCollider.tileResolver,o=document.createElement("canvas");o.width=272,o.height=240;var a,s,u=o.getContext("2d");return function(t,e){var i=r.toIndex(e.size.x),a=r.toIndex(e.pos.x);n(a,a+i),t.drawImage(o,-e.pos.x%16,-e.pos.y)}}function r(t,e,n){void 0===e&&(e=64),void 0===n&&(n=64);var i=document.createElement("canvas");i.width=e,i.height=n;var r=i.getContext("2d");return function(o,a){t.forEach(function(t){r.clearRect(0,0,e,n),t.draw(r),o.drawImage(i,t.pos.x-a.pos.x,t.pos.y-a.pos.y)})}}function o(t){var e=t.tileCollider.tileResolver,n=e.tileSize,i=[],r=e.getByIndex;return e.getByIndex=function(t,n){return i.push({x:t,y:n}),r.call(e,t,n)},function(e,r){e.strokeStyle="blue",i.forEach(function(t){var i=t.x,o=t.y;e.strokeRect(i*n-r.pos.x,o*n-r.pos.y,n,n)}),t.entities.forEach(function(t){e.strokeRect(t.pos.x-r.pos.x,t.pos.y-r.pos.y,t.size.x,t.size.y)}),i.splice(0)}}function a(t){return function(e,n){e.strokeStyle="purple",e.strokeRect(t.pos.x-n.pos.x,t.pos.y-n.pos.y,t.size.x,t.size.y)}}Object.defineProperty(e,"__esModule",{value:!0}),e.createBackgroundLayer=i,e.createSpriteLayer=r,e.createCollisionLayer=o,e.createCameraLayer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),r=n(1),o=n(13),a=function(){function t(){this.comp=new i.Compositor,this.entities=new Set,this.tiles=new r.Matrix,this.tileCollider=new o.TileCollider(this.tiles),this.gravity=1500,this.totalTime=0}return t.prototype.update=function(t){var e=this;this.entities.forEach(function(n){n.update(t),n.pos.x+=n.vel.x*t,e.tileCollider.checkX(n),n.pos.y+=n.vel.y*t,e.tileCollider.checkY(n),n.vel.y+=e.gravity*t}),this.totalTime+=t},t}();e.Level=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.layers=[]}return t.prototype.draw=function(t,e){this.layers.forEach(function(n){n(t,e)})},t}();e.Compositor=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(14),o=function(){function t(t){this.tileMatrix=t,this.tileResolver=new r.TileResolver(this.tileMatrix)}return t.prototype.checkX=function(t){var e,n=t.pos,i=t.size,r=t.vel;if(r.x>0)e=n.x+i.x;else{if(!(r.x<0))return;e=n.x}var o=this.tileResolver.searchByRange(e,e,n.y,n.y+i.y);o&&o.forEach(function(t){"ground"===t.tile.type&&(r.x>0?n.x+i.x>t.x1&&(n.x=t.x1-i.x,r.x=0):r.x<0&&n.x<t.x2&&(n.x=t.x2,r.x=0))})},t.prototype.checkY=function(t){var e,n=t.pos,r=t.size,o=t.vel;if(o.y>0)e=n.y+r.y;else{if(!(o.y<0))return;e=n.y}var a=this.tileResolver.searchByRange(n.x,n.x+r.x,e,e);a&&a.forEach(function(e){"ground"===e.tile.type&&(o.y>0?n.y+r.y>e.y1&&(n.y=e.y1-r.y,o.y=0,t.obstruct(i.Side.bottom)):o.y<0&&n.y<e.y2&&(n.y=e.y2,o.y=0,t.obstruct(i.Side.top)))})},t}();e.TileCollider=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){void 0===e&&(e=16),this.matrix=t,this.tileSize=e}return t.prototype.toIndex=function(t){return Math.floor(t/this.tileSize)},t.prototype.toIndexRange=function(t,e){var n=Math.ceil(e/this.tileSize)*this.tileSize,i=[],r=t;do{i.push(this.toIndex(r)),r+=this.tileSize}while(r<n);return i},t.prototype.getByIndex=function(t,e){var n=this.matrix.get(t,e);if(n){return{tile:n,x1:t*this.tileSize,x2:(t+1)*this.tileSize,y1:e*this.tileSize,y2:(e+1)*this.tileSize}}},t.prototype.searchByPosition=function(t,e){return this.getByIndex(this.toIndex(t),this.toIndex(e))},t.prototype.searchByRange=function(t,e,n,i){var r=this,o=[];return this.toIndexRange(t,e).forEach(function(t){r.toIndexRange(n,i).forEach(function(e){var n=r.getByIndex(t,e);n&&o.push(n)})}),o},t}();e.TileResolver=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,n){this.image=t,this.tileWidth=e,this.tileHeight=n,this.tiles=new Map,this.animations=new Map}return t.prototype.define=function(t,e,n,i,r){var o=this,a=[!1,!0].map(function(t){var a=document.createElement("canvas");a.width=i,a.height=r;var s=a.getContext("2d");return t&&(s.scale(-1,1),s.translate(-i,0)),s.drawImage(o.image,e,n,i,r,0,0,i,r),a});this.tiles.set(t,a)},t.prototype.defineTile=function(t,e,n){this.define(t,e*this.tileWidth,n*this.tileHeight,this.tileWidth,this.tileHeight)},t.prototype.defineAnimation=function(t,e){this.animations.set(t,e)},t.prototype.draw=function(t,e,n,i,r){void 0===r&&(r=!1);var o=this.tiles.get(t);if(!o)throw new Error('SpriteSheet.draw(): Sprite "'+t+'" not found');e.drawImage(o[r?1:0],n,i)},t.prototype.drawTile=function(t,e,n,i){this.draw(t,e,n*this.tileWidth,i*this.tileHeight)},t.prototype.drawAnimation=function(t,e,n,i,r){var o=this.animations.get(t);if(!o)throw new Error("Animation not found: "+t);this.drawTile(o(r),e,n,i)},t}();e.SpriteSheet=i},function(t,e,n){"use strict";function i(t){function e(e){e?t.jump.start():t.jump.cancel()}function n(e){t.go.dir+=1===e?1:-1}function i(e){t.go.dir+=1===e?-1:1}function r(e){t.turbo(1===e)}var a=new o.Keyboard;return a.addListener("KeyD",n),a.addListener("KeyA",i),a.addListener("KeyP",e),a.addListener("KeyO",r),a}function r(t){return function(){var e=navigator.getGamepads()[0];if(e){var n=e.axes[0],i=e.buttons[0].pressed||e.buttons[1].pressed,r=e.buttons[2].pressed||e.buttons[3].pressed;Math.abs(n)<.5&&(n=0),i?t.jump.start():t.jump.cancel(),t.go.dir=n,t.turbo(r)}}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(17);e.setupKeyboard=i,e.setupGamepad=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.keyStates=new Map,this.keyListeners=new Map}return t.prototype.addListener=function(t,e){this.keyListeners.set(t,e),this.keyStates.set(t,0)},t.prototype.listenTo=function(t){var e=this;["keydown","keyup"].forEach(function(n){t.addEventListener(n,function(t){e.handleEvent(t)})})},t.prototype.handleEvent=function(t){if(!t.repeat){var e=this.keyListeners.get(t.code),n="keydown"===t.type?1:0;e&&(this.keyStates.set(t.code,n),e(n),t.preventDefault())}},t}();e.Keyboard=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){void 0===t&&(t=1/60);var e=this;this.deltaTime=t,this.accumulatedTime=0,this.lastTime=0,this.update=function(t){},this.updateProxy=function(t){for(e.accumulatedTime+=(t-e.lastTime)/1e3,e.accumulatedTime=Math.min(e.accumulatedTime,1);e.accumulatedTime>e.deltaTime;)e.update(e.deltaTime),e.accumulatedTime-=e.deltaTime;e.enqueue(),e.lastTime=t}}return t.prototype.start=function(){this.enqueue()},t.prototype.enqueue=function(){requestAnimationFrame(this.updateProxy)},t}();e.Timer=i}]);
//# sourceMappingURL=build.js.map